# Binance Futures ATR Monitor (WebSocket)

Это приложение для мониторинга индикатора ATR (Average True Range) на фьючерсном рынке Binance с использованием WebSocket API.

## Особенности

- Использование WebSocket API Binance для получения данных в реальном времени
- Отсутствие ограничений на количество запросов и банов IP
- Расчет ATR для различных таймфреймов (1m, 3m, 5m, 15m, 1h)
- Визуализация "горячих" пар с высоким ATR
- Экспорт данных в CSV
- Параллельная обработка данных для быстрой работы

## Технический стек

- **FastAPI**: REST API для обработки данных
- **Streamlit**: Web-интерфейс с таблицей и визуализацией
- **WebSocket**: Подключение к Binance Futures в реальном времени
- **Pandas**: Расчет ATR с использованием UDF
- **Asyncio**: Асинхронная обработка данных

## Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/binance-atr-monitor.git
cd binance-atr-monitor
```

2. Установите зависимости:
```
pip install -r app/requirements.txt
```

## Запуск

Используйте скрипт run.sh для запуска приложения:

```
chmod +x run.sh
./run.sh
```

Или запустите компоненты вручную:

1. Запустите FastAPI сервер:
```
python -m app.main
```

2. В отдельном терминале запустите Streamlit:
```
streamlit run app/streamlit_app.py
```

## Использование

1. Откройте веб-браузер и перейдите по адресу: http://localhost:8501
2. В интерфейсе Streamlit вы увидите таблицу с данными ATR для всех символов
3. Используйте чекбокс "Показать все доступные символы" для отображения всех пар или ограничения их количества
4. Нажмите кнопку "Обновить данные" для принудительного обновления
5. Используйте кнопку "Export to CSV" для экспорта текущих данных

## Преимущества WebSocket

- Нет ограничений на количество запросов
- Нет необходимости в прокси
- Данные обновляются автоматически в реальном времени
- Более быстрая работа и меньшая нагрузка на сеть

## Структура проекта

- `app/`: Основной код приложения
  - `api/`: FastAPI эндпоинты
  - `utils/`: Утилиты и вспомогательные функции
    - `binance_websocket_client.py`: Клиент для работы с WebSocket API Binance
    - `atr_calculator.py`: Расчет ATR
    - `logger.py`: Логирование
  - `main.py`: Точка входа для FastAPI
  - `streamlit_app.py`: Streamlit интерфейс
- `run.sh`: Скрипт для запуска приложения

## Расчет ATR

ATR рассчитывается по следующей формуле:
1. TR = max(high-low, |high-prev_close|, |low-prev_close|)
2. ATR = SMA(TR, 14)
3. ATR% = (ATR / current_price) * 100

## Цветовая маркировка

- **Зеленый**: ATR% ≥ 0.15% (HOT)
- **Красный**: ATR% < 0.15% (OK)
# botstat_binance
